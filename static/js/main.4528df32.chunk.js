(this.webpackJsonpshoppies=this.webpackJsonpshoppies||[]).push([[0],{19:function(e,t,a){e.exports=a.p+"static/media/noImageAvailable.625d1aff.jpg"},31:function(e,t,a){e.exports=a(68)},36:function(e,t,a){},38:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(6),i=a.n(s),o=(a(36),a(2)),c=a.n(o),l=a(4),u=a(1),m=(a(38),a(28)),f=a.n(m),p=function(e){var t=e.handleSearch,a=e.handleSignInAndRegister,s=e.isLoggedIn,i=Object(n.useState)(!1),o=Object(u.a)(i,2),c=(o[0],o[1],Object(n.useState)("")),l=Object(u.a)(c,2),m=l[0],f=l[1];return r.a.createElement("nav",{className:" flexParent flexColumn navigation"},r.a.createElement("h1",null,"Reel Vote"),r.a.createElement("p",null,"Nominate your 5 all time favourite movies!"),r.a.createElement("div",{className:"flexParent menuOptions"},r.a.createElement("div",{className:"flexParent searchContainer"},r.a.createElement("form",{className:"flexParent",action:"",onSubmit:function(e){t(e,m)}},r.a.createElement("label",{htmlFor:"movieSearch"}),r.a.createElement("input",{id:"movieSearch",className:"movieSearch",type:"search",required:!0,placeholder:"Search movies",onChange:function(e){f(e.target.value)}}),r.a.createElement("button",{className:"searchButton",type:"submit"},r.a.createElement("i",{className:"fas fa-search"})))),r.a.createElement("button",{className:"account",onClick:a},!1===s?"Sign In/Up":"Sign Out")))},d=function(e){var t=Object(n.useState)(!1),s=Object(u.a)(t,2),i=s[0],o=s[1],c=e.poster,l=e.title,m=e.year,f=e.id,p=e.handleSignInAndRegister,d=e.addNomination,h=e.isLoggedIn,v=e.userNominations,b=e.removeNominee,g=e.tally;Object(n.useEffect)((function(){v.length>0&&v.map((function(e){e.id===f&&o(!0)}))}),[v]);var E={poster:c,title:l,id:f,year:m,tally:g};return r.a.createElement("ul",{className:"flexParent flexColumn movieOption"},r.a.createElement("li",{className:"flexParent imgContainer"},"N/A"===c?r.a.createElement("img",{src:a(19),alt:"Poster for: ".concat(l)}):r.a.createElement("img",{src:c,alt:"Poster for: ".concat(l)}),r.a.createElement("div",{className:"movieDetails"},r.a.createElement("h3",null,l),r.a.createElement("p",null,m))),g>0&&r.a.createElement("li",{className:"flexParent tally"},r.a.createElement("i",{className:"fas fa-award"}),r.a.createElement("p",null,g)),r.a.createElement("li",{className:"nominateButton"},!0===i&&r.a.createElement("button",{className:"swal2-styled",onClick:function(){b(E),o(!1)}},"Remove"),!1===i&&r.a.createElement("button",{className:"swal2-styled",onClick:!0===h?function(){v.length<5===!0?o(!0):o(!1),d(E)}:p},"Nominate")))},h=function(e){var t=e.searchMessage,a=e.results,n=e.handleSignInAndRegister,s=e.isLoggedIn,i=e.addNomination,o=e.removeNominee,c=e.userNominations,l=e.closeSearch;return r.a.createElement("section",{className:"wrapper"},r.a.createElement("h2",null,t),r.a.createElement("div",{className:"flexParent closeContainer"},r.a.createElement("p",null,'Tap "X" to close! '),r.a.createElement("button",{className:"toggleSearch",onClick:function(){l()}},r.a.createElement("i",{className:"fas fa-times"}))),a.length>0&&r.a.createElement("ul",{className:"flexParent flexWrap"}," ",a.map((function(e,t){var a=e.Poster,l=e.Title,u=e.Year,m=e.imdbID;return r.a.createElement("li",null,r.a.createElement(d,{key:t,id:m,title:l,poster:a,year:u,handleSignInAndRegister:n,isLoggedIn:s,addNomination:i,removeNominee:o,userNominations:c,tally:0}))}))))},v=function(e){var t=e.userNominations,a=e.removeNominee,s=Object(n.useState)(t),i=Object(u.a)(s,2),o=i[0],c=i[1];return Object(n.useEffect)((function(){c(t)}),[t]),r.a.createElement("div",{className:"wrapper userNominations"},r.a.createElement("h2",null,"Your Nominations"),0===o.length&&r.a.createElement("p",null,"You havent picked any nominees yet!"),o.length>0&&r.a.createElement("ul",{className:"flexParent flexWrap"},o.map((function(e,t){var n=e.poster,s=e.title,i=e.year,c=e.id;return r.a.createElement("li",null,r.a.createElement(d,{key:t,poster:n,title:s,id:c,year:i,removeNominee:a,userNominations:o,tally:0}))}))))},b=(a(55),a(29)),g=function(e){var t=e.publicNominations;return r.a.createElement("section",{className:"topNominations"},r.a.createElement(b.Carousel,{showArrows:!0,infiniteLoop:!0,autoPlay:!0,swipeable:!0,dynamicHeight:!1,showStatus:!1},t.slice(0,5).map((function(e,t){var n=e.title,s=e.poster,i=e.tally;return r.a.createElement("div",{className:"flexParent topContainer"},r.a.createElement("ul",{className:"flexParent"},r.a.createElement("li",{className:"flexParent imgLI"},r.a.createElement("div",{className:"flexParent topImgContainer"},"N/A"===s?r.a.createElement("img",{src:a(19),alt:"Poster for: ".concat(n)}):r.a.createElement("img",{src:s,alt:"Poster for: ".concat(n)}))),r.a.createElement("li",{className:"topDetails flexParent"},r.a.createElement("div",{className:"detailCard"},r.a.createElement("p",null,"#",t+1),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-award"}),i),r.a.createElement("p",{className:"topTitle"},n)))))}))))},E=function(){return r.a.createElement("div",{className:"banner"},r.a.createElement("h2",null,"Max Nominations Limit Reached!"))},N=function(){return r.a.createElement("footer",{className:"flexParent"},r.a.createElement("p",null,"\xa9 2020 Designed and Coded by:",r.a.createElement("a",{href:"https://kajanthkumar.com/",target:"blank"},"Kajanth Kumar")))},y=a(8),w=a.n(y);a(65);w.a.initializeApp({apiKey:"AIzaSyCku0CL-1JzPVdi-8qzYwUJifsPzKbgsRc",authDomain:"shoppies-116db.firebaseapp.com",databaseURL:"https://shoppies-116db.firebaseio.com",projectId:"shoppies-116db",storageBucket:"shoppies-116db.appspot.com",messagingSenderId:"76445350094",appId:"1:76445350094:web:189725267c077875eb789f"});var S=w.a,x=a(30),j=a.n(x),O=(a(67),function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],s=t[1],i=Object(n.useState)(!1),o=Object(u.a)(i,2),m=o[0],b=o[1],y=Object(n.useState)(""),w=Object(u.a)(y,2),x=w[0],O=w[1],I=Object(n.useState)(!1),P=Object(u.a)(I,2),C=P[0],k=P[1],R=Object(n.useState)([]),B=Object(u.a)(R,2),A=B[0],L=B[1],U=Object(n.useState)(""),D=Object(u.a)(U,2),T=D[0],Y=D[1],z=Object(n.useState)([]),M=Object(u.a)(z,2),q=M[0],J=M[1],K=Object(n.useState)(!1),W=Object(u.a)(K,2),F=W[0],V=W[1],G=j.a.mixin({confirmButtonColor:"#004C3F"});Object(n.useEffect)((function(){S.database().ref().on("value",(function(e){var t=e.val().allNominations,a=[];for(var n in t)t[n].tally>0&&a.push(t[n]);if(a.sort((function(e,t){return t.tally-e.tally})),L(a),!0===C){var r=[],s=e.val().users;for(var i in s)if(s[i].username===T){if(s[i].username.nominations){5===s[i].username.nominations.length&&V(!0);for(var o=0;o<s[i].username.nominations.length-1;o++)r.push(s[i].username.nominations[o])}J(r);break}}}))}),[]),Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().then((function(e){}))}),[T]);var H=function(){b(!1),O("")},X=function(){q.length>=4?V(!0):V(!1)},$=function(e){var t=S.database().ref(),a="";if(X(),!1===F?t.once("value",(function(e){var t=e.val().users;for(var n in t)if(T.toUpperCase()===t[n].username.toUpperCase()){a=n;break}})):G.fire({scrollbarPadding:!1,icon:"error",title:"Oops...",text:"You cant nominate more than 5 times! Please remove a nomination."}),""!==a){var n=q;n.push(e),t.child("users").child(a).update({nominations:n}),Z(e,"add")}},Q=function(e){var t=S.database().ref(),a="";t.once("value",(function(e){var t=e.val().users;for(var n in t)if(T.toUpperCase()===t[n].username.toUpperCase()){a=n;break}}));var n=q.filter((function(t){return t.id!==e.id}));J(n),t.child("users").child(a).update({nominations:n}),Z(e,"remove"),V(!1)},Z=function(e,t){var a=e.poster,n=e.title,r=e.year,s=e.id,i=S.database().ref(),o=i.child("allNominations"),c="",l=0;i.once("value",(function(t){var a=t.val().allNominations;for(var n in a)if(e.id===a[n].id){c=n,l=a[n].tally;break}})),""!==c&&"remove"===t&&l>0?o.child(c).update({tally:l-1}):""!==c&&"add"===t?o.child(c).update({tally:l+1}):o.push({poster:a,title:n,year:r,id:s,tally:1})},_=function(){!0===C?window.location.reload(!0):G.fire({scrollbarPadding:!1,title:"Sign In or Register",showCancelButton:!0,confirmButtonText:"Sign In",cancelButtonText:"Register"}).then((function(e){e.value?ee("Sign In"):e.dismiss===G.DismissReason.cancel&&ee("Register")}))},ee=function(){var e=Object(l.a)(c.a.mark((function e(t){var a,n,r,s,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n="",r="",s=function(){G.fire({scrollbarPadding:!1,title:t,html:"<input id='username' class=\"swal2-input\" required type='email' placeholder=\"your username ...\" value=".concat(n,"> <br/> <input class=\"swal2-input\" required id='password' type='password' value='").concat(r,'\' placeholder="your password ...">'),showCancelButton:!0,confirmButtonText:t,preConfirm:function(){return{user:document.getElementById("username").value,pass:document.getElementById("password").value}}}).then((function(e){if(e.value){var s=e.value,i=s.user,o=s.pass;if(n=i,r=o,""===i||""===o)a[1]("You can't have empty fields!");else if("Register"===t)(function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(n,r);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){!0===e?a[2]("Registered Successfully!"):a[1]("Username already exists!")}));else if("Sign In"===t){(function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(n,r);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){!0===e?a[2]("Signed In Successfully!"):a[1]("Incorrect Username/Password!")}))}}else e.dismiss,G.DismissReason.cancel}))},(a=[]).push(s),i=function(e){G.fire({scrollbarPadding:!1,icon:"error",title:"Oops...",text:e,showCancelButton:!0,cancelButtonText:"Back"}).then((function(e){e.dismiss===G.DismissReason.cancel&&a[0]()}))},a.push(i),o=function(e){G.fire({scrollbarPadding:!1,icon:"success",title:"Success",text:e,showCancelButton:!1})},a.push(o),a[0]();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,S.database().ref().once("value",(function(e){var a=e.val().users;for(var n in a)T.toUpperCase()===a[n].username.toUpperCase()&&a[n].nominations&&(J(a[n].nominations),t=q)}));case 3:return e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(l.a)(c.a.mark((function e(t,a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!0,e.next=3,S.database().ref().once("value",(function(e){var r=e.val().users;for(var s in r)if(t.toUpperCase()===r[s].username.toUpperCase()){n=!1;break}!0===n&&(S.database().ref("users/").push({username:t,password:a,nominations:[]}),Y(t),k(!0))}));case 3:return e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ne=function(){var e=Object(l.a)(c.a.mark((function e(t,a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,e.next=3,S.database().ref().once("value",(function(e){var r=e.val().users;for(var s in r)t===r[s].username&&a===r[s].password&&(Y(t),k(!0),X(),n=!0)}));case 3:return e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"App"},r.a.createElement(p,{isLoggedIn:C,handleSearch:function(e,t){s([]),b(!0),e.preventDefault(),f()({url:"http://www.omdbapi.com/?i=tt3896198&apikey=5f442a30",method:"GET",responseType:"json",params:{s:t,plot:"Short",type:"movie"}}).then((function(e){"Movie not found!"===e.data.Error?O("Sorry, could not find results for: ".concat(t)):(O("Found ".concat(e.data.Search.length," results for : ").concat(t)),s(e.data.Search))}))},closeSearch:H,handleSignInAndRegister:_}),A.length>0&&!1===m&&r.a.createElement(g,{handleSignInAndRegister:_,publicNominations:A}),!0===m&&r.a.createElement(h,{results:a,searchMessage:x,handleSignInAndRegister:_,addNomination:$,isLoggedIn:C,userNominations:q,closeSearch:H,removeNominee:Q}),!0===F&&r.a.createElement(E,null),!1===m&&!0===C&&r.a.createElement(v,{userNominations:q,removeNominee:Q}),!1===m&&r.a.createElement("section",{className:"wrapper publicNominations"},r.a.createElement("h2",null,"Public Nominations"),r.a.createElement("div",{className:"flexParent publicList"},A.map((function(e,t){var a=e.poster,n=e.title,s=e.id,i=e.year,o=e.tally;return r.a.createElement(d,{key:t,id:s,title:n,poster:a,year:i,handleSignInAndRegister:_,isLoggedIn:C,addNomination:$,removeNominee:Q,userNominations:q,tally:o})})))),r.a.createElement(N,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.4528df32.chunk.js.map