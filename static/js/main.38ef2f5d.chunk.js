(this.webpackJsonpshoppies=this.webpackJsonpshoppies||[]).push([[0],{20:function(e,a,t){e.exports=t.p+"static/media/noImageAvailable.625d1aff.jpg"},31:function(e,a,t){e.exports=t(68)},36:function(e,a,t){},38:function(e,a,t){},68:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(7),i=t.n(s),o=(t(36),t(2)),c=t.n(o),l=t(5),u=t(1),m=(t(38),t(29)),f=t.n(m),p=function(e){var a=e.handleSearch,t=e.handleSignInAndRegister,s=e.isLoggedIn,i=Object(n.useState)(!1),o=Object(u.a)(i,2),c=(o[0],o[1],Object(n.useState)("")),l=Object(u.a)(c,2),m=l[0],f=l[1];return r.a.createElement("nav",{className:" flexParent flexColumn navigation"},r.a.createElement("h1",null,"The Shoppies"),r.a.createElement("p",null,"Nominate your 5 all time favourite movies!"),r.a.createElement("div",{className:"flexParent menuOptions"},r.a.createElement("div",{className:"flexParent searchContainer"},r.a.createElement("form",{className:"flexParent",action:"",onSubmit:function(e){a(e,m)}},r.a.createElement("label",{htmlFor:"movieSearch"}),r.a.createElement("input",{id:"movieSearch",className:"movieSearch",type:"search",required:!0,placeholder:"Search movies",onChange:function(e){f(e.target.value)}}),r.a.createElement("button",{className:"searchButton",type:"submit"},r.a.createElement("i",{className:"fas fa-search"})))),r.a.createElement("button",{className:"account",onClick:t},!1===s?"Sign In/Up":"Sign Out")))},d=function(e){var a=Object(n.useState)(!1),s=Object(u.a)(a,2),i=s[0],o=s[1],c=e.poster,l=e.title,m=e.year,f=e.id,p=e.handleSignInAndRegister,d=e.addNomination,h=e.isLoggedIn,v=e.userNominations,b=e.removeNominee,g=e.tally;Object(n.useEffect)((function(){v.length>0&&v.map((function(e){e.id===f&&o(!0)}))}),[v]);var E={poster:c,title:l,id:f,year:m,tally:g};return r.a.createElement("ul",{className:"flexParent flexColumn movieOption"},r.a.createElement("li",{className:"flexParent imgContainer"},"N/A"===c?r.a.createElement("img",{src:t(20),alt:"Poster for: ".concat(l)}):r.a.createElement("img",{src:c,alt:"Poster for: ".concat(l)}),r.a.createElement("div",{className:"movieDetails"},r.a.createElement("h3",null,l),r.a.createElement("p",null,m))),g>0&&r.a.createElement("li",{className:"flexParent tally"},r.a.createElement("i",{className:"fas fa-award"}),r.a.createElement("p",null,g)),r.a.createElement("li",{className:"nominateButton"},!0===i&&r.a.createElement("button",{className:"swal2-styled",onClick:function(){b(E),o(!1)}},"Remove"),!1===i&&r.a.createElement("button",{className:"swal2-styled",onClick:!0===h?function(){v.length<5===!0?o(!0):o(!1),d(E)}:p},"Nominate")))},h=function(e){var a=e.searchMessage,t=e.results,n=e.handleSignInAndRegister,s=e.isLoggedIn,i=e.addNomination,o=e.removeNominee,c=e.userNominations,l=e.closeSearch;return r.a.createElement("section",{className:"wrapper"},r.a.createElement("h2",null,a),r.a.createElement("div",{className:"flexParent closeContainer"},r.a.createElement("p",null,'Tap "X" to close! '),r.a.createElement("button",{className:"toggleSearch",onClick:function(){l()}},r.a.createElement("i",{className:"fas fa-times"}))),t.length>0&&r.a.createElement("ul",{className:"flexParent flexWrap"}," ",t.map((function(e,a){var t=e.Poster,l=e.Title,u=e.Year,m=e.imdbID;return r.a.createElement("li",null,r.a.createElement(d,{key:a,id:m,title:l,poster:t,year:u,handleSignInAndRegister:n,isLoggedIn:s,addNomination:i,removeNominee:o,userNominations:c,tally:0}))}))))},v=function(e){var a=e.userNominations,t=e.removeNominee,s=Object(n.useState)(a),i=Object(u.a)(s,2),o=i[0],c=i[1];return Object(n.useEffect)((function(){c(a)}),[a]),r.a.createElement("div",{className:"wrapper"},r.a.createElement("h2",null,"Your Nominations"),0===o.length&&r.a.createElement("p",null,"You havent picked any nominees yet!"),o.length>0&&r.a.createElement("ul",{className:"flexParent flexWrap"},o.map((function(e,a){var n=e.poster,s=e.title,i=e.year,c=e.id;return r.a.createElement("li",null,r.a.createElement(d,{key:a,poster:n,title:s,id:c,year:i,removeNominee:t,userNominations:o,tally:0}))}))))},b=(t(55),t(30)),g=function(e){var a=e.publicNominations;return r.a.createElement("section",{className:"topNominations"},r.a.createElement(b.Carousel,{showArrows:!0,infiniteLoop:!0,autoPlay:!0,swipeable:!0,dynamicHeight:!1,showStatus:!1},a.slice(0,3).map((function(e,a){var n=e.title,s=e.poster,i=e.tally;return r.a.createElement("div",{className:"flexParent topContainer"},r.a.createElement("ul",{className:"flexParent"},r.a.createElement("li",{className:"flexParent imgLI"},r.a.createElement("div",{className:"flexParent topImgContainer"},"N/A"===s?r.a.createElement("img",{src:t(20),alt:"Poster for: ".concat(n)}):r.a.createElement("img",{src:s,alt:"Poster for: ".concat(n)}))),r.a.createElement("li",{className:"topDetails flexParent"},r.a.createElement("div",{className:"detailCard"},r.a.createElement("p",null,"#",a+1),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-award"}),i),r.a.createElement("p",null,n)))))}))))},E=function(){return r.a.createElement("div",{className:"banner"},r.a.createElement("h2",null,"Max Nominations Limit Reached!"))},N=function(){return r.a.createElement("footer",{className:"flexParent"},r.a.createElement("p",null,"\xa9 2020 Submission for Shopify Winter 2021 Internship. Designed and Coded by:",r.a.createElement("a",{href:"https://kajanthkumar.com/",target:"blank"},"Kajanth Kumar")))},y=t(9),w=t.n(y);t(65);w.a.initializeApp({apiKey:"AIzaSyCku0CL-1JzPVdi-8qzYwUJifsPzKbgsRc",authDomain:"shoppies-116db.firebaseapp.com",databaseURL:"https://shoppies-116db.firebaseio.com",projectId:"shoppies-116db",storageBucket:"shoppies-116db.appspot.com",messagingSenderId:"76445350094",appId:"1:76445350094:web:189725267c077875eb789f"});var S=w.a,x=t(4),j=t.n(x),O=(t(67),function(){var e=Object(n.useState)([]),a=Object(u.a)(e,2),t=a[0],s=a[1],i=Object(n.useState)(!1),o=Object(u.a)(i,2),m=o[0],b=o[1],y=Object(n.useState)(""),w=Object(u.a)(y,2),x=w[0],O=w[1],I=Object(n.useState)(!1),P=Object(u.a)(I,2),k=P[0],C=P[1],R=Object(n.useState)([]),B=Object(u.a)(R,2),A=B[0],L=B[1],U=Object(n.useState)(""),D=Object(u.a)(U,2),T=D[0],Y=D[1],z=Object(n.useState)([]),M=Object(u.a)(z,2),W=M[0],q=M[1],J=Object(n.useState)(!1),K=Object(u.a)(J,2),F=K[0],G=K[1];Object(n.useEffect)((function(){S.database().ref().on("value",(function(e){var a=e.val().allNominations,t=[];for(var n in a)a[n].tally>0&&t.push(a[n]);if(t.sort((function(e,a){return a.tally-e.tally})),L(t),!0===k){var r=[],s=e.val().users;for(var i in s)if(s[i].username===T){if(s[i].username.nominations){5===s[i].username.nominations.length&&G(!0);for(var o=0;o<s[i].username.nominations.length-1;o++)r.push(s[i].username.nominations[o])}q(r);break}}}))}),[]),Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().then((function(e){}))}),[T]);var H=function(){b(!1),O("")},V=function(){W.length>=4?G(!0):G(!1)},X=function(e){var a=S.database().ref(),t="";if(V(),!1===F?a.once("value",(function(e){var a=e.val().users;for(var n in a)if(T.toUpperCase()===a[n].username.toUpperCase()){t=n;break}})):j.a.fire({scrollbarPadding:!1,icon:"error",title:"Oops...",text:"You cant nominate more than 5 times! Please remove a nomination."}),""!==t){var n=W;n.push(e),a.child("users").child(t).update({nominations:n}),Q(e,"add")}},$=function(e){var a=S.database().ref(),t="";a.once("value",(function(e){var a=e.val().users;for(var n in a)if(T.toUpperCase()===a[n].username.toUpperCase()){t=n;break}}));var n=W.filter((function(a){return a.id!==e.id}));q(n),a.child("users").child(t).update({nominations:n}),Q(e,"remove"),G(!1)},Q=function(e,a){var t=e.poster,n=e.title,r=e.year,s=e.id,i=S.database().ref(),o=i.child("allNominations"),c="",l=0;i.once("value",(function(a){var t=a.val().allNominations;for(var n in t)if(e.id===t[n].id){c=n,l=t[n].tally;break}})),""!==c&&"remove"===a&&l>0?o.child(c).update({tally:l-1}):""!==c&&"add"===a?o.child(c).update({tally:l+1}):o.push({poster:t,title:n,year:r,id:s,tally:1})},Z=function(){!0===k?window.location.reload(!0):j.a.fire({scrollbarPadding:!1,title:"Sign In or Register",showCancelButton:!0,confirmButtonText:"Sign In",cancelButtonText:"Register"}).then((function(e){e.value?_("Sign In"):e.dismiss===j.a.DismissReason.cancel&&_("Register")}))},_=function(){var e=Object(l.a)(c.a.mark((function e(a){var t,n,r,s,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n="",r="",s=function(){j.a.fire({scrollbarPadding:!1,title:a,html:"<input id='username' class=\"swal2-input\" required type='email' placeholder=\"your username ...\" value=".concat(n,"> <br/> <input class=\"swal2-input\" required id='password' type='password' value='").concat(r,'\' placeholder="your password ...">'),showCancelButton:!0,confirmButtonText:a,preConfirm:function(){return{user:document.getElementById("username").value,pass:document.getElementById("password").value}}}).then((function(e){if(e.value){var s=e.value,i=s.user,o=s.pass;if(n=i,r=o,""===i||""===o)t[1]("You can't have empty fields!");else if("Register"===a)(function(){var e=Object(l.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(n,r);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){!0===e?t[2]("Registered Successfully!"):t[1]("Username already exists!")}));else if("Sign In"===a){(function(){var e=Object(l.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(n,r);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){!0===e?t[2]("Signed In Successfully!"):t[1]("Incorrect Username/Password!")}))}}else e.dismiss,j.a.DismissReason.cancel}))},(t=[]).push(s),i=function(e){j.a.fire({scrollbarPadding:!1,icon:"error",title:"Oops...",text:e,showCancelButton:!0,cancelButtonText:"Back"}).then((function(e){e.dismiss===j.a.DismissReason.cancel&&t[0]()}))},t.push(i),o=function(e){j.a.fire({scrollbarPadding:!1,icon:"success",title:"Success",text:e,showCancelButton:!1})},t.push(o),t[0]();case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ee=function(){var e=Object(l.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,S.database().ref().once("value",(function(e){var t=e.val().users;for(var n in t)T.toUpperCase()===t[n].username.toUpperCase()&&t[n].nominations&&(q(t[n].nominations),a=W)}));case 3:return e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(l.a)(c.a.mark((function e(a,t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!0,e.next=3,S.database().ref().once("value",(function(e){var r=e.val().users;for(var s in r)if(a.toUpperCase()===r[s].username.toUpperCase()){n=!1;break}!0===n&&(S.database().ref("users/").push({username:a,password:t,nominations:[]}),Y(a),C(!0))}));case 3:return e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),te=function(){var e=Object(l.a)(c.a.mark((function e(a,t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,e.next=3,S.database().ref().once("value",(function(e){var r=e.val().users;for(var s in r)a===r[s].username&&t===r[s].password&&(Y(a),C(!0),V(),n=!0)}));case 3:return e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"App"},r.a.createElement(p,{isLoggedIn:k,handleSearch:function(e,a){s([]),b(!0),e.preventDefault(),f()({url:"http://www.omdbapi.com/?i=tt3896198&apikey=5f442a30",method:"GET",responseType:"json",params:{s:a,plot:"Short",type:"movie"}}).then((function(e){"Movie not found!"===e.data.Error?O("Sorry, could not find results for: ".concat(a)):(O("Found ".concat(e.data.Search.length," results for : ").concat(a)),s(e.data.Search))}))},closeSearch:H,handleSignInAndRegister:Z}),A.length>0&&!1===m&&r.a.createElement(g,{handleSignInAndRegister:Z,publicNominations:A}),!0===m&&r.a.createElement(h,{results:t,searchMessage:x,handleSignInAndRegister:Z,addNomination:X,isLoggedIn:k,userNominations:W,closeSearch:H,removeNominee:$}),!0===F&&r.a.createElement(E,null),!1===m&&!0===k&&r.a.createElement(v,{userNominations:W,removeNominee:$}),!1===m&&r.a.createElement("section",{className:"wrappper publicNominations"},r.a.createElement("h2",null,"Public Nominations"),r.a.createElement("div",{className:"flexParent publicList"},A.map((function(e,a){var t=e.poster,n=e.title,s=e.id,i=e.year,o=e.tally;return r.a.createElement(d,{key:a,id:s,title:n,poster:t,year:i,handleSignInAndRegister:Z,isLoggedIn:k,addNomination:X,removeNominee:$,userNominations:W,tally:o})})))),r.a.createElement(N,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.38ef2f5d.chunk.js.map