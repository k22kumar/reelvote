(this.webpackJsonpshoppies=this.webpackJsonpshoppies||[]).push([[0],{20:function(e,t,a){e.exports=a.p+"static/media/noImageAvailable.625d1aff.jpg"},31:function(e,t,a){e.exports=a(68)},36:function(e,t,a){},38:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(7),o=a.n(s),i=(a(36),a(1)),c=a.n(i),l=a(5),u=a(2),m=(a(38),a(29)),p=a.n(m),f=function(e){var t=e.handleSearch,a=e.closeSearch,s=e.handleSignInAndRegister,o=e.isLoggedIn,i=Object(n.useState)(!1),c=Object(u.a)(i,2),l=c[0],m=c[1],p=Object(n.useState)(""),f=Object(u.a)(p,2),d=f[0],h=f[1],v=function(){m(!l)};return r.a.createElement("nav",{className:"flexParent navigation"},r.a.createElement("button",{className:"account",onClick:s},!1===o?"Sign In/Up":"Sign Out"),!l&&r.a.createElement("h1",null,"Shoppies"),l&&r.a.createElement("div",{className:"flexParent searchContainer"},r.a.createElement("form",{className:"flexParent",action:"",onSubmit:function(e){t(e,d)}},r.a.createElement("label",{htmlFor:"movieSearch"}),r.a.createElement("input",{id:"movieSearch",type:"search",required:!0,placeholder:"Search movies",onChange:function(e){h(e.target.value)}}),r.a.createElement("button",{class:"searchButton",type:"submit"},r.a.createElement("i",{className:"fas fa-search"})))),l&&r.a.createElement("button",{className:"toggleSearch",onClick:function(){v(),a()}},r.a.createElement("i",{className:"fas fa-times"})),!l&&r.a.createElement("button",{className:"toggleSearch",onClick:v},r.a.createElement("i",{className:"fas fa-search"})))},d=function(e){var t=Object(n.useState)(!1),s=Object(u.a)(t,2),o=s[0],i=s[1],c=e.poster,l=e.title,m=e.year,p=e.id,f=e.handleSignInAndRegister,d=e.addNomination,h=e.isLoggedIn,v=e.userNominations,b=e.removeNominee,g=e.tally;Object(n.useEffect)((function(){v.length>0&&v.map((function(e){e.id===p&&i(!0)}))}),[v]);var E={poster:c,title:l,id:p,year:m,tally:g};return r.a.createElement("ul",{className:"flexParent flexColumn movieOption"},r.a.createElement("li",{className:"flexParent imgContainer"},"N/A"===c?r.a.createElement("img",{src:a(20),alt:"Poster for: ".concat(l)}):r.a.createElement("img",{src:c,alt:"Poster for: ".concat(l)})),r.a.createElement("li",{className:"movieDetails"},r.a.createElement("h3",null,l),r.a.createElement("p",null,m)),g>0&&r.a.createElement("li",{className:"flexParent tally"},r.a.createElement("i",{className:"fas fa-award"}),r.a.createElement("p",null,g)),r.a.createElement("li",{className:"nominateButton"},!0===o&&r.a.createElement("button",{className:"swal2-styled",onClick:function(){b(E),i(!1)}},"Remove"),!1===o&&r.a.createElement("button",{className:"swal2-styled",onClick:!0===h?function(){d(E),i(!0)}:f},"Nominate")))},h=function(e){var t=e.searchMessage,a=e.results,n=e.handleSignInAndRegister,s=e.isLoggedIn,o=e.addNomination,i=e.removeNominee,c=e.userNominations;return r.a.createElement("div",null,r.a.createElement("h2",null,t),a.length>0&&a.map((function(e,t){var a=e.Poster,l=e.Title,u=e.Year,m=e.imdbID;return r.a.createElement(d,{key:t,id:m,title:l,poster:a,year:u,handleSignInAndRegister:n,isLoggedIn:s,addNomination:o,removeNominee:i,userNominations:c,tally:0})})))},v=function(e){var t=e.userNominations,a=e.removeNominee;return r.a.createElement("div",null,r.a.createElement("h2",null,"Your Nominations"),0===t.length&&r.a.createElement("p",null,"You havent picked any nominees yet!"),t.length>0&&r.a.createElement("ul",null,t.map((function(e,n){var s=e.poster,o=e.title,i=e.year,c=e.id;return r.a.createElement(d,{key:n,poster:s,title:o,id:c,year:i,removeNominee:a,userNominations:t,tally:0})}))))},b=(a(55),a(30)),g=function(e){var t=e.publicNominations;return console.log("sup",t),console.log("no",t[0]),r.a.createElement("section",{className:"topNominations"},r.a.createElement(b.Carousel,{showArrows:!0,infiniteLoop:!0,autoPlay:!0,swipeable:!0,dynamicHeight:!1,showStatus:!1},t.slice(0,3).map((function(e,t){var n=e.title,s=(e.id,e.poster),o=e.tally;return r.a.createElement("div",{className:"flexParent topContainer"},r.a.createElement("ul",{className:"flexParent"},r.a.createElement("li",{className:"flexParent imgLI"},r.a.createElement("div",{className:"flexParent topImgContainer"},"N/A"===s?r.a.createElement("img",{src:a(20),alt:"Poster for: ".concat(n)}):r.a.createElement("img",{src:s,alt:"Poster for: ".concat(n)}))),r.a.createElement("li",{className:"topDetails"},r.a.createElement("p",null,o),r.a.createElement("p",null,n))))}))))},E=a(9),y=a.n(E);a(65);y.a.initializeApp({apiKey:"AIzaSyCku0CL-1JzPVdi-8qzYwUJifsPzKbgsRc",authDomain:"shoppies-116db.firebaseapp.com",databaseURL:"https://shoppies-116db.firebaseio.com",projectId:"shoppies-116db",storageBucket:"shoppies-116db.appspot.com",messagingSenderId:"76445350094",appId:"1:76445350094:web:189725267c077875eb789f"});var N=y.a,w=a(4),S=a.n(w),x=(a(67),function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],s=t[1],o=Object(n.useState)(!1),i=Object(u.a)(o,2),m=i[0],b=i[1],E=Object(n.useState)(""),y=Object(u.a)(E,2),w=y[0],x=y[1],O=Object(n.useState)(!1),j=Object(u.a)(O,2),I=j[0],k=j[1],C=Object(n.useState)([]),P=Object(u.a)(C,2),B=P[0],R=P[1],A=Object(n.useState)(""),U=Object(u.a)(A,2),L=U[0],D=U[1],T=Object(n.useState)([]),Y=Object(u.a)(T,2),z=Y[0],q=Y[1],J=Object(n.useState)(!1),M=Object(u.a)(J,2),F=M[0],K=M[1];Object(n.useEffect)((function(){N.database().ref().on("value",(function(e){var t=e.val().allNominations,a=[];for(var n in t)t[n].tally>0&&a.push(t[n]);if(a.sort((function(e,t){return t.tally-e.tally})),R(a),!0===I){var r=[],s=e.val().users;for(var o in s)if(s[o].username===L){if(s[o].username.nominations){5===s[o].username.nominations.length&&K(!0);for(var i=0;i<s[o].username.nominations.length-1;i++)r.push(s[o].username.nominations[i])}q(r);break}}}))}),[]),Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().then((function(e){}))}),[L]);var W=function(e){var t=N.database().ref(),a="";t.once("value",(function(e){var t=e.val().users;if(!1===F){for(var n in t)if(L.toUpperCase()===t[n].username.toUpperCase()){a=n;break}}else S.a.fire({scrollbarPadding:!1,icon:"error",title:"Oops...",text:"You cant nominate more than 5 times!",showCancelButton:!0,cancelButtonText:"Back"})}));var n=z;n.push(e),t.child("users").child(a).update({nominations:n}),H(e,"add")},G=function(e){var t=N.database().ref(),a="";t.once("value",(function(e){var t=e.val().users;for(var n in t)if(L.toUpperCase()===t[n].username.toUpperCase()){a=n;break}}));var n=z.filter((function(t){return t.id!==e.id}));q(n),t.child("users").child(a).update({nominations:n}),H(e,"remove")},H=function(e,t){var a=e.poster,n=e.title,r=e.year,s=e.id,o=N.database().ref(),i=o.child("allNominations"),c="",l=0;o.once("value",(function(t){var a=t.val().allNominations;for(var n in a)if(e.id===a[n].id){c=n,l=a[n].tally;break}})),""!==c&&"remove"===t&&l>0?i.child(c).update({tally:l-1}):""!==c&&"add"===t?i.child(c).update({tally:l+1}):i.push({poster:a,title:n,year:r,id:s,tally:1})},V=function(){!0===I?window.location.reload(!0):S.a.fire({scrollbarPadding:!1,title:"Sign In or Register",showCancelButton:!0,confirmButtonText:"Sign In",cancelButtonText:"Register"}).then((function(e){e.value?$("Sign In"):e.dismiss===S.a.DismissReason.cancel&&$("Register")}))},$=function(){var e=Object(l.a)(c.a.mark((function e(t){var a,n,r,s,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n="",r="",s=function(){S.a.fire({scrollbarPadding:!1,title:t,html:"<input id='username' class=\"swal2-input\" required type='email' placeholder=\"your username ...\" value=".concat(n,"> <br/> <input class=\"swal2-input\" required id='password' type='password' value='").concat(r,'\' placeholder="your password ...">'),showCancelButton:!0,confirmButtonText:t,preConfirm:function(){return{user:document.getElementById("username").value,pass:document.getElementById("password").value}}}).then((function(e){if(e.value){var s=e.value,o=s.user,i=s.pass;if(n=o,r=i,""===o||""===i)a[1]("You can't have empty fields!");else if("Register"===t)(function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(n,r);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){!0===e?a[2]("Registered Successfully!"):a[1]("Username already exists!")}));else if("Sign In"===t){(function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(n,r);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){!0===e?a[2]("Signed In Successfully!"):a[1]("Incorrect Username/Password!")}))}}else e.dismiss,S.a.DismissReason.cancel}))},(a=[]).push(s),o=function(e){S.a.fire({scrollbarPadding:!1,icon:"error",title:"Oops...",text:e,showCancelButton:!0,cancelButtonText:"Back"}).then((function(e){e.dismiss===S.a.DismissReason.cancel&&a[0]()}))},a.push(o),i=function(e){S.a.fire({scrollbarPadding:!1,icon:"success",title:"Success",text:e,showCancelButton:!1})},a.push(i),a[0]();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,N.database().ref().once("value",(function(e){var a=e.val().users;for(var n in a)L.toUpperCase()===a[n].username.toUpperCase()&&a[n].nominations&&(q(a[n].nominations),t=z)}));case 3:return e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(l.a)(c.a.mark((function e(t,a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!0,e.next=3,N.database().ref().once("value",(function(e){var r=e.val().users;for(var s in r)if(t.toUpperCase()===r[s].username.toUpperCase()){n=!1;break}!0===n&&(N.database().ref("users/").push({username:t,password:a,nominations:[]}),D(t),k(!0))}));case 3:return e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Z=function(){var e=Object(l.a)(c.a.mark((function e(t,a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,e.next=3,N.database().ref().once("value",(function(e){var r=e.val().users;for(var s in r)t===r[s].username&&a===r[s].password&&(D(t),k(!0),n=!0)}));case 3:return e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"App"},r.a.createElement(f,{isLoggedIn:I,handleSearch:function(e,t){s([]),b(!0),e.preventDefault(),p()({url:"http://www.omdbapi.com/?i=tt3896198&apikey=5f442a30",method:"GET",responseType:"json",params:{s:t,plot:"Short",type:"movie"}}).then((function(e){"Movie not found!"===e.data.Error?x("Sorry, could not find results for: ".concat(t)):(x("Found ".concat(e.data.Search.length," results for : ").concat(t)),s(e.data.Search))}))},closeSearch:function(){b(!1),x("")},handleSignInAndRegister:V}),B.length>0&&!1===m&&r.a.createElement(g,{handleSignInAndRegister:V,publicNominations:B}),!0===m&&r.a.createElement(h,{results:a,searchMessage:w,handleSignInAndRegister:V,addNomination:W,isLoggedIn:I,userNominations:z,removeNominee:G}),!1===m&&!0===I&&r.a.createElement(v,{userNominations:z,removeNominee:G}),!1===m&&r.a.createElement("section",{className:"publicNominations"},r.a.createElement("h2",null,"Public Nominations"),r.a.createElement("div",{className:"flexParent publicList"},B.map((function(e,t){var a=e.poster,n=e.title,s=e.id,o=e.year,i=e.tally;return r.a.createElement(d,{key:t,id:s,title:n,poster:a,year:o,handleSignInAndRegister:V,isLoggedIn:I,addNomination:W,removeNominee:G,userNominations:z,tally:i})})))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.2e95756e.chunk.js.map